[toc]

# Конструктор CMS Drupal

Drupal --- это cms, написанная на `php`, и использующая в качестве хранилища
данных реляционные БД. Это и среда разработки для программистов (**CMF**), и
готовая система + конструктор готовых решений

Drupal имеет модульную архитектуру с компактным ядром, предоставляющим API, к
которому могут обращаться модули

Ядро системы открытое

На Drupal можно создавать различные типы сайтов

## Наиболее важные функции

- таксономия
- широкий набор свойств при построении рубрикаторов
- вложенность категорий любой глубины
- поиск
- ролевая модель
- динамическое построение меню
- поддержка XML форматов
- агрегация материалов с других сайтов
- ЧПУ
- перевод интерфейса на разные языки
- мультисайтинг
- возможность создания сайтов с пересекающимся содержимым
- уведомления об обновлениях

## Достоинства

- возможность добавления модулей
- открытый исходный код
- высокий уровень безопасности
- функциональность на грани универсальности

## Недостатки

- сложность освоения
- мало бесплатных шаблонов
- может некорректно работать на ресурсах, которые предоставляет дешевый хостинг

## Основные понятия

### Нода

Нода --- элемент контента, который основывается на одной и той же базовой
структуре. Их можно проектировать в админке. Могут содержать произвольные поля.
Может с легкостью расширяться

### Таксономия

В Drupal таксономия состоит из словарей и терминов

### Формат ввода

Формат ввода --- определенный набор прав, применяющийся при отображении страницы
сайта после ввода содержимого. Применяется только при выводе введенного
содержимого. Форму и содержимое в БД он не изменяет

### Блок

Блоки --- часть содержимого сайта. Иногда их называют виджеты. В них содержится
определенная законченная информация. Могут отображаться на одних страницах и не
отображаться на других

### Меню

Ну меню и меню, че бубнить-то...

### Права доступа

Количество ролей пользователей не ограничено

## Стандартный набор модулей

Все модули располагаются на Drupal.org

Все модули и темы могут быть представлены в нескольких версиях:

- стабильная версия
- альфа/бета версия
- разрабатываемая версия

Страница модуля имеет

- название
- описание
- ссылки на скачивание
- статистика
- ссылки на документацию

# Ноды в Drupal

## Типы материалов

По умолчанию уже существует 2 типа материалов: `article` и `basic page`. Для
создания типа нод (материалов) необходимо перейти в раздел панели админа
`структура - типы материалов`. При создании типа материала мы работаем с полями
формы, которые будут использоваться для добавления определенной информации в
структуру материала. Можно добавлять требуемые поля различных типов, что
позволит гибко сформировать информационную структуру содержимого конкретной ноды

## Работа с контентом

После создания типа материала, можно наполнить сайт содержимым:
`содержимое - добавить материал`

Так как ноды делятся по типам, перед созданием материала требуется выбрать
интересующий тип

Можно создавать сразу ссылку в меню

## Расширение возможностей сайта

### Создание модуля

Создать файл `module_name.yml` в `modules/custom/[module:name]`

Пробелы в `yml` файлах имеют значение. Отступы используются для организации
данных в структуру по образцу массива

Создать контроллер в `modules/[module:name]/src/Controller`
`HelloWorldController.php`

Создать файл маршрутизации `module_name.routing.yml`. Он размещается в корневой
папке модуля. Служит для описания маршрута по вашему шаблону. В качестве
параметров маршрута выступают:

- заголовок страницы
- URL
- контроллер и т.д.

### Конструкция блока

Блок --- контейнер для контента или функционала сайта, которому можно задавать
расположение

Страницы редактирования блоков: `управление - структура - схема блоков`

Число областей в разных темах оформления разные. Можно перемещать блоки, нажав
на стрелку слева от названия блока

Можно настраивать существующие блоки

Типы блоков:

- предоставляемые модулями
- созданные вручную

Все присутствующие по умолчанию блоки Drupal, предоставляемые модулями

Система блоков имеет 2 API:

- Plugin API --- позволяет создавать блоки
- Entity API --- позволяет управлять настройками блока и определять настройки
  его видимости

## База для функционирования Drupal

Drupal сам по себе является надстройкой, которая функционирует на определенной
базе:

- Веб-сервер `Apache`
- Интерпретатор `PHP`
- СУБД `MySQL`

Это основа полноценного веб-сервера

PHP --- транслирующий интерпретатор. В его задачи входят: подготовка и
исполнение программного кода. Здесь в качестве программного кода выступает
Drupal
